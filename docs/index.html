<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>

    <title>Fermé pour inventaire</title>

    <meta name="description" content="Histoire et mécanique des « closures »"/>
    <meta name="author" content="Frédéric Cabestre"/>

    <link rel="stylesheet" href="./dist/reset.css">
    <link rel="stylesheet" href="./dist/reveal.css">
    <link rel="stylesheet" href="./dist/theme/transparents.css" id="theme"/>

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="./plugin/highlight/zenburn.css"/>
</head>

<body>
<div class="reveal">
    <div class="slides">

        <section>
            <h1>Fermé pour inventaire</h1>
            <h3>Histoire et mécanique des « closures »</h3>
            <aside class="notes">
                Bonjour à tous, et merci d'avoir choisi cette session dans laquelle il ne sera question ni de Kubernetes,
                ni d'IA... Quoique ? Il y sera en revanche question fonctions anonymes et de leur mise en œuvre. Et celà
                au travers de nombreux fragments de code qui devraient être suffisamment faciles à suivre. Dans tous les
                cas à la fin vous trouverez des pointeurs vers cette présentation elle-même et le code associé sur GitHub.
            </aside>
        </section>

        <section>
            <div style="display: flex; justify-content: space-between">
                <div style="margin-left: 2em; display: flex; flex-direction: column">
                    <div style="margin-top: 1em; font-size: 1.55em; text-align: left" class="green">Frédéric Cabestre</div>
                </div>
            </div>
            <blockquote style="margin-top: 8em; margin-right: 2em; margin-bottom: 100%">
                Soy cantor, soy embustero<br>
                Me gusta el juego y el vino, tengo alma de marinero<br>
                ¿Qué le voy a hacer si yo nací en el Mediterráneo?
                <div style="margin-top:1ex; font-size: smaller">&mdash; Juan Manuel Serrat</div>
            </blockquote>
            <aside class="notes">
                Je suis Frédéric Cabestre, un artisan du logiciel indépendant issu il y a fort longtemps du monde
                académique... Ce qui a laissé quelques traces. Si vous avez des soucis avec des sujets ésotériques ou
                tout simplement besoin de faire accompagner une équipe de développement, vous pouvez me contacter...
                Vous trouverez bien comment faire.
            </aside>
        </section>

        <section>
            <h1><span style="font-size:2em;text-transform:lowercase">$\lambda$</span></h1>
            <aside class="notes">
                <ul>
                    <li>Fonctions d'ordre supérieur</li>
                    <li>Outils de base</li>
                    <li>Citoyen de première classe</li>
                    <li>Valeur fonctionnelle</li>
                    <li>Lambda / anonyme</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px">

                                val aList = 1..100
                                val filteredList = aList.filter({ x -> x % 2 == 0 })
                                println(filteredList)

                                /*

                                  [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26,
                                   28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50,
                                   52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74,
                                   76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100]

                                */

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Kotlin</li>
                    <li>C#, Rust, Java ou Javascript</li>
                    <li>pas de trouble, typage </li>
                    <li>contrairement à...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="language-lisp" style="max-height: 800px">

                    (defun filter (fn list)
                        (cond ((null list) nil)
                              (t (cond ((funcall (eval fn) (car list)) (cons (car list) (filter fn (cdr list))))
                                       (t (filter fn (cdr list)))))))

                    (filter '(lambda (x) (= (mod x 2) 0)) '(1 2 3 4 5 6))

            </code><div class="lang">Lisp</div></pre>
            <aside class="notes">
                <ul>
                    <li>Common Lisp</li>
                    <li>Fil rouge historique</li>
                    <li>Enseigné à la fac</li>
                    <li>Bavé</li>
                </ul>
            </aside>
        </section>

        <section>

            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                                val aList = 1..100
                                val filteredList = aList.filter({ x -> x % 2 == 0 })
                                println(filteredList)

                                /*

                                  [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26,
                                   28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50,
                                   52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74,
                                   76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100]

                                */

            </code><div class="lang">Kotlin</div></pre>
            <pre class="fragment" style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape="">

                        public inline fun &lt;T&gt; <span class="ch">Iterable&lt;T&gt;</span>.filter(predicate: (T) -> Boolean): List&lt;T&gt; {
                            return filterTo(ArrayList&lt;T&gt;(), predicate)
                        }

            </code><div class="lang">Kotlin</div></pre>
           <aside class="notes">
               <ul>
                   <li>Intention plus que procédure</li>
                   <li>Filter...</li>
               </ul>
           </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                                val aList = 1..100
                                val filteredList = aList.filter({ x -> x % 2 == 0 })
                                println(filteredList)

                                /*

                                  [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26,
                                   28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50,
                                   52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74,
                                   76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100]

                                */
                
            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape="">

                        public inline fun &lt;T&gt; Iterable&lt;T&gt;.filter(predicate: <span class="ch">(T) -> Boolean</span>): List&lt;T&gt; {
                            return filterTo(ArrayList&lt;T&gt;(), predicate)
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>... iterable, prédicat en paramètre</li>
                    <li>Démarche plus déclarative que procédurale</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        (Int) -> Boolean

                        <span class="fragment">(Int, String) -> String</span>

                        <span class="fragment">((Float) -> Float) -> Float</span>

                        <span class="fragment">(Float) -> (Float) -> Float</span>

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>fonctions citoyens de première classe</li>
                    <li>description type</li>
                    <li>exemple</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        aList.filter(<span class="ch">{ x -> x % 2 == 0 }</span>)

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>lambda surbrillance</li>
                </ul>
            </aside>
        </section>






        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        aList.filter({ x -> x % 2 == 0 })

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape="">

                        aList.filter({ <span class="ch">it</span> % 2 == 0 })

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Particularité Kotlin</li>
                    <li>it</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        aList.filter({ x -> x % 2 == 0 })

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex"><code class="kotlin" style="max-height: 800px" data-noescape="">

                        aList.filter({ it % 2 == 0 })

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape="">

                        aList.filter { it % 2 == 0 }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Particularité Kotlin</li>
                    <li>lambda en dernière position des paramètre</li>
                    <li>Groovy</li>
                    <li>DSL embarqués</li>
                    <li>Mais pas le meilleur exemple...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun longComputation(x: Int): Int {
                            return x * x // 🤡
                        }

                        fun parametricPredicate(x: Int, y: Int): Boolean {
                            val c = longComputation(x)
                            return y % c == 0
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre class="fragment" style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px">

                        fun main() {
                            val aList = 1..100
                            val filteredList = aList.filter { y -> parametricPredicate(3, y) }
                            println(filteredList)

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>prédicat ajustable</li>
                    <li>long calcul</li>
                    <li>tiré par les cheveux</li>
                    <li>adapter avec fonction anonyme</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun longComputation(x: Int): Int {
                            return x * x // 🤡
                        }

                        fun parametricPredicate(x: Int, y: Int): Boolean {
                            val c = longComputation(x)
                            return y % c == 0
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val filteredList = aList.filter <span class="ch">{ y -> parametricPredicate(3, y) }</span>
                            println(filteredList)

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>ramener à un seul paramètre</li>
                    <li>« longComputation » à chaque itération de « filter »</li>
                    <li>sortir ce long calcul de « parametricPredicate »</li>
                    <li>application partielle</li>
                    <li>...</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Curryfication</h1>
            <aside class="notes">
                <ul>
                    <li>Haskell Curry</li>
                    <li>logicien 20ᵉ siècle</li>
                    <li>logique combinatoire</li>
                    <li>langage Haskell</li>
                    <li>Moses Schönfinkel</li>
                    <li>De quoi s'agit-il ?</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;  display: grid; grid-template-rows: 2fr 1fr">
                <div style="margin-top: .5em; font-size: 2.11em">$f: (A, B) \rightarrow C$</div>
                <div class="fragment" style="margin-top: .25em; font-size: 2.11em">$f: A \rightarrow (B \rightarrow C)$</div>
            </div>
            <aside class="notes">
                <ul>
                    <li>fonction à 2 paramètres...</li>
                    <li>récursivement N paramètres...</li>
                    <li>application partielle</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int, y: Int): Boolean {
                            val c = longComputation(x)
                            return y % c == 0
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val predicate = { y -> parametricPredicate(3, y) }
                            println(aList.filter(predicate))

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>exemple de ravail</li>
                    <li>curryfier  « parametricPredicate »...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val predicate = parametricPredicate(3)
                            println(aList.filter(predicate))

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Que peut-on constater ici ?</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicate(x: Int): <span class="ch">(Int) -> Boolean</span> {
                            val c = longComputation(x)
                            return <span class="ch">{ y -> y % c == 0 }</span>
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val predicate = parametricPredicate(3)
                            println(aList.filter(predicate))

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Un seul paramètre</li>
                    <li>retourne une fonction</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val predicate = <span class="ch">parametricPredicate(3)</span>
                            println(aList.filter(predicate))

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Affectation variable</li>
                    <li>citoyens de première classe...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun main() {
                            val aList = 1..100
                            val predicate = parametricPredicate(3)
                            println(aList.filter(<span class="ch">predicate</span>))

                            /* [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99] */
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>utilisation pour filter</li>
                    <li>long calcul 1 fois</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Lisp 1.5</h1>
            <h2>1958</h2>
            <aside class="notes">
                Avant d'aller plus loin, faisons un premier saut en 1958 à la naissance de LISP.
            </aside>
        </section>

        <section>
            <div style="margin-bottom: 100%; margin-top: 3em; display: grid; grid-template-columns: auto auto; grid-template-rows: auto auto">
                <div>
                    <div style="grid-column: 1; grid-row: 1">
                        <img src="./images/john-mccarthy.png" alt="">
                    </div>
                    <div class="fragment" style="grid-column: 1; grid-row: 2">John MacCarthy</div>
                </div>
                <div class="fragment">
                    <div style="grid-column: 2; grid-row: 1/2">
                        <a href="./references/recursive.pdf"><img style="border: thin solid black" src="./images/Lisp.png" alt=""></a>
                    </div>
                </div>
            </div>

            <aside class="notes">
                <ul>
                    <li>Cet élégant barbu est...John McCarthy (1927-2011)</li>
                    <li>Stanford</li>
                    <li>prix Turing en 1971</li>
                    <li>temps partagé (unix)</li>
                    <li>pionier IA (terminologie de lui)</li>
                    <li>algorithme Alpha-Béta></li>
                    <li>LISP (58) après FORTRAN (54)</li>
                </ul>
            </aside>
        </section>

        <section>
            <a href="./references/HistoryOfLisp.pdf"><img src="./images/HistoryOfLisp.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li> manipulation symbolique</li>
                    <li>FORTRAN calcul numérique</li>
                    <li>dérivation symbolique de fonctions mathématiques</li>
                    <li>recherche en IA et en théorie des langages</li>
                </ul>
            </aside>
        </section>

        <section>
            <img src="./images/HistoryOfLispHighlighted.png" alt="">
            <aside class="notes">
                <ul>
                    <li>initialement sans fonctions d'ordre supérieur</li>
                    <li>syntaxe proche de FORTRAN (le M-language)</li>
                    <li>structures de liste (le S-language)</li>
                    <li>plongement EVAL, APPLY</li>
                    <li>homo iconique</li>
                    <li>garbage collector</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Funarg Problem</h1>
            <aside class="notes">
                <ul>
                    <li>fonctions d'ordre supérieur</li>
                    <li>LAMBDAs</li>
                    <li>FUNARG</li>
                    <li>Pas si fonctionnel, pas lambda calcul</li>
                </ul>
            </aside>
        </section>

        <section>
            <a href="./references/AIM-199.pdf"><img style="border: thin solid black; margin-bottom: 100%; margin-top: 3em" src="./images/funarg-problem.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li>FUNARG problem</li>
                    <li>Joel Moses</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px">
                                fun longComputation(x: Int): Int {
                                    return x * x
                                }

                                fun parametricPredicate(x: Int): (Int) -> Boolean {
                                    val c = longComputation(x)
                                    return { y -> y % c == 0 }
                                }

                                fun main() {
                                    val c = 42
                                    val predicate: (Int) -> Boolean = parametricPredicate(3)
                                    if (predicate(81)) println("Ok") else println("Ko")
                                }
            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>exemple sans appel à filter</li>
                    <li>variable « c » dans main</li>
                </ul>
            </aside>

        </section>

        <section>
            <h2>Les fonctions <span class="green">(récursives)</span> décortiquées</h2>
            <a style="margin-bottom: 100%" href="https://www.youtube.com/watch?v=aTDSZtHCIGU"><img src="./images/Devoxx-2022.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li>Auto promotion</li>
                </ul>
            </aside>

        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = parametricPredicate(3)
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/1.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>environnement d'exécutio</li>
                    <li>enregistrement d'activation</li>
                    <li>créé à l'activation de la fonction</li>
                    <li>détruit quand elle se termine</li>
                    <li>pile (mais tous les labngages)</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    <span class="ch">val c = 42</span>
    val predicate: (Int) -> Boolean = parametricPredicate(3)
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/2.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>« c » se voit affecter la valeur 42</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/2.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>appel « parametricPredicate » currifiée avec 3 en argument</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/3.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>nouvel enregistrement d'activation</li>
                </ul>
            </aside>
        </section>


        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = <span class="ch">longComputation(x)</span>
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/3.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>appel « longComputation »</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = <span class="ch">longComputation(x)</span>
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return <span class="ch">x * x</span>
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/4.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>nouvel enregistrement d'activation </li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = <span class="ch">longComputation(x)</span>
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return <span class="ch">x * x</span>
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/4b.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>« longComputation » produit et retourne son résultat 9.</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = <span class="ch">longComputation(x)</span>
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/5.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>affecté à « c » dans l'environnement de « parametricPredicate »</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return <span class="ch">{ y -> y % c == 0 }</span>
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/5b.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>valeur représentant une fonction</li>
                    <li>naïvement pointeur sur fonction</li>
                    <li>C</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/6.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>adresse du code compilé « @Lambda0 »</li>
                    <li>retourné et affecté à la variable « predicate »</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = parametricPredicate(3)
    if <span class="ch">(predicate(81))</span> println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/6.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>appel « predicate » avec 81 en paramètre</li>
                    <li>allocation enregistrement d'activation</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = parametricPredicate(3)
    if <span class="ch">(predicate(81))</span> println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem/7.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>« c » n'a pas de valeur</li>
                    <li>remonte la chaîne, trouve 42</li>
                    <li>résultat faux, ça pourrait planter aussi</li>
                    <li>pire silencieusement erroné ou plantage</li>
                    <li>liaison dynamique, sujet débattu</li>
                    <li>idîome LISP</li>
                    <li>raisonnement local</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Scheme</h1>
            <h2>1975</h2>
            <aside class="notes">
                <ul>
                    <li>sujet débattu pendant plus de 15 ans</li>
                    <li>arrivée de SCHEME</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-bottom: 100%; margin-top: 3em; display: grid; grid-template-columns: auto auto; grid-template-rows: auto auto">
                <div>
                    <div style="grid-column: 1; grid-row: 1">
                        <img src="./images/Guy_Steele.jpg" alt="">
                    </div>
                    <div class="fragment" style="grid-column: 1; grid-row: 2">Guy L. Steele Jr.</div>
                </div>
                <div class="fragment">
                    <div style="grid-column: 2; grid-row: 1/2">
                        <a href="./references/AIM-453.pdf"><img style="border: thin solid black" src="./images/LambdaTheUltimate.png" alt=""></a>
                    </div>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>Guy Lewis Steel Junior</li>
                    <li>EMACS et TeX</li>
                    <li>*LISP et C*, thinking machines</li>
                    <li>Common Lisp, C, Fortran commités</li>
                    <li>Java, Sun 1994, Oracle depuis 2010.</li>
                    <li>Verse, Epic Games, Simon Peyton-Jones</li>
                    <li>SCHEME 75, Gerald Jay Sussmann « Structure et interprétation des programmes informatiques »</li>
                    <li>« λ the ultimate » papers</li>
                    <li>partit de la liaison lexicale</li>
                    <li>explication</li>
                </ul>
            </aside>
        </section>


        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;  display: grid; grid-template-columns: 3fr 2fr">
                <div style="justify-self: center">$x$</div>
                <div style="justify-self: start"> Variable</div>
                <div style="justify-self: center">$\lambda x.\,M$</div>
                <div style="justify-self: start"> Abstraction</div>
                <div style="justify-self: center; margin-bottom: 2.5em">$M\,N$</div>
                <div style="margin-bottom: 2.5em; justify-self: start"> Application</div>
                <div style="justify-self: center">$\lambda x.\,(f\,x) \rightarrow f$</div>
                <div style="justify-self: start">$\eta$-reduction</div>
                <div style="justify-self: center">$\lambda x.\,M[x] \rightarrow \lambda y.\,M[y]$</div>
                <div style="justify-self: start">$\alpha$-conversion</div>
                <div style="justify-self: center">$(\lambda x.\,M)\:E \rightarrow M[x:=E]$</div>
                <div style="justify-self: start">$\beta$-reduction</div>
            </div>
            <aside class="notes">
                <ul>
                    <li>Lambda calcul</li>
                    <li>syntaxe, interprétation</li>
                </ul>
            </aside>
        </section>

        <section>
            <a href="./references/mechanical-eval.pdf"><img style="border: thin solid black; margin-bottom: 100%; margin-top: 3em" src="./images/Landin.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li>Peter Landin datant de 1964</li>
                    <li>sucre syntaxique</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return <span class="ch">{ y -> y % c == 0 }</span>
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem-solved/5.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>« pointeur » sur le code insuffisant</li>
                    <li>élements de son environnemen</li>
                    <li>valeurs de ses variables libres</li>
                    <li>pas partie des paramètres</li>
                </ul>
            </aside>
        </section>


        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return <span class="ch">{ y -> y % c == 0 }</span>
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem-solved/5b.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>structure</li>
                    <li>variables libres </li>
                    <li>pointeur sur son code</li>
                    <li>tas, survie à désallocation</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem-solved/6.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>affecté à predicate</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = <span class="ch">parametricPredicate(3)</span>
    if (predicate(81)) println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem-solved/7.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>C'est une closure ou fermeture</li>
                    <li>inventaire des variables libre pour fermer la lambda</li>
                    <li>concept: lambda liée lexicalement</li>
                    <li>implem: closure</li>
                    <li>confusion des deux</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 1em; display: grid; grid: [row1-start] 'left center right' [row1-end][row1-start] 'bottom bottom bottom' [row1-end] / 1fr 1fr 1fr">
                <div style="grid-area: left">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun main() {
    val c = 42
    val predicate: (Int) -> Boolean = parametricPredicate(3)
    if <span class="ch">(predicate(81))</span> println("Ok") else println("Ko")
}
                    </code></pre>
                </div>
                <div style="grid-area: center">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun parametricPredicate(x: Int): (Int) -> Boolean {
    val c = longComputation(x)
    return { y -> y % c == 0 }
}

                    </code></pre>
                </div>
                <div style="grid-area: right">
                    <pre style="max-height: 800px; font-size: 0.8ex; margin-top: 0"><code class="Kotlin" data-noescape>
fun longComputation(x: Int): Int {
    return x * x
}


                    </code></pre>
                </div>
                <div style="grid-area: bottom; margin-bottom: 100%;">
                    <object data-fragment-index="4" data="./images/funarg-problem-solved/8.svg"></object>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>évaluation de « predicate(81)</li>
                    <li>bonne valeur de « c »</li>
                    <li>consensus liaison lexicale</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-bottom: 100%; margin-top: 3em; display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 2fr">
                <div style="grid-column: 2; grid-row: 1">
                    <img src="./images/Haskell-logo.png" alt="">
                </div>
                <div class="fragment" data-fragment-index="1" style="grid-column: 2; grid-row: 2">
                    <a href="./references/spineless-tagless-gmachine.pdf"><img style="border: solid black 1px; margin-top: 2.5em" src="./images/Haskell.png" alt=""></a>
                </div>
                <div style="grid-column: 1; grid-row: 1">
                    <img src="./images/OCaml-logo.png" alt="">
                </div>
                <div class="fragment" data-fragment-index="1" style="grid-column: 1; grid-row: 2">
                    <a href="./references/ZINC.pdf"><img style="border: solid black 1px; margin-top: 2.5em" src="./images/OCaml.png" alt=""></a>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>programmation fonctionnelle</li>
                    <li>Ocaml et Haskell -> LISP</li>
                    <li>curryfication</li>
                    <li>rapports internes mise en œuvre</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Clojure</h1>
            <h2>2007</h2>
            <aside class="notes">
                <ul>
                    <li>similitude entre les « Closures » et les objets</li>
                    <li>dictionnaire de valeurs et un pointeur sur du code</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-bottom: 100%; margin-top: 3em; display: grid; grid-template-columns: auto auto; grid-template-rows: auto auto">
                <div>
                    <div style="grid-column: 1; grid-row: 1">
                        <img src="./images/Hickey.png" alt="">
                    </div>
                    <div class="fragment" style="grid-column: 1; grid-row: 2">Rich Hickey</div>
                </div>
                <div class="fragment">
                    <div style="grid-column: 2; grid-row: 1/2">
                        <a href="./references/HistoryOfClojure.pdf"><img style="border: thin solid black" src="./images/Clojure.png" alt=""></a>
                    </div>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>Rich Hickey</li>
                    <li>essai .NET, puis Java, notez le J</li>
                    <li>dialecte de SCHEME -> liaison lexicale</li>
                    <li>autres partits pris (appels terminaux et récursivité)</li>
                    <li>« Proceedings of the ACM on Programming Languages »</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1><span style="text-transform:lowercase">$\lambda$</span>-lifting</h1>
            <aside class="notes">
                <ul>
                    <li>compilateurs pour des langages fonctionnels</li>
                    <li>« lambda lifting »</li>
                    <li>« lambda desugaring »</li>
                    <li>Forax</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre class="fragment" style="font-size: 1.1ex; margin-top: 1em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicateLambda(c: Int, y: Int): Boolean = y % c == 0

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> parametricPredicateLambda(c, y) }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>fonction sans variable libre</li>
                    <li>plus haut niveau</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        <span class="ch">fun parametricPredicateLambda(c: Int, y: Int): Boolean = y % c == 0</span>

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> parametricPredicateLambda(c, y) }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>plus de paramètres</li>
                    <li>capture des variables libres</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> y % c == 0 }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicateLambda(c: Int, y: Int): Boolean = y % c == 0

                        fun parametricPredicate(x: Int): (Int) -> Boolean {
                            val c = longComputation(x)
                            return { y -> <span class="ch">parametricPredicateLambda(c, y)</span> }
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Là, vous me direz, on a fait que déplacer le problème... C'est pas faux !</li>
                </ul>

            </aside>
        </section>

        <section>
            <h1>Closure conversion</h1>
            <aside class="notes">
                <ul>
                    <li>transformation fondamentale</li>
                    <li>closure conversion</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(val capture: C, val code: (C, I) -> O)

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>similitude objet <-> closure</li>
                </ul>
                Et c'est là que la similitude en objet et closure se voit un peu mieux.
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(<span class="ch">val capture: C</span>, val code: (C, I) -> O)

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>utilisation d'une structure</li>
                    <li>variable capturée</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(val capture: C, <span class="ch">val code: (C, I) -> O</span>)

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>pointeur sur le code</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(val capture: C, val code: (C, I) -> O)

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px">

                        fun parametricPredicate(x: Int): Closure&lt;Int, Int, Boolean&gt; {
                            val c = longComputation(x)
                            return Closure(c, ::parametricPredicateLambda)
                        }

                        fun main() {
                            val c = 42
                            val predicate: Closure&lt;Int, Int, Boolean&gt; = parametricPredicate(3)
                            if (predicate.code(predicate.capture, 81)) println("Ok") else println("Ko")
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>Réécriture de parametricPredicate...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(val capture: C, val code: (C, I) -> O)

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicate(x: Int): Closure&lt;Int, Int, Boolean&gt; {
                            val c = longComputation(x)
                            return <span class="ch">Closure(c, ::parametricPredicateLambda)</span>
                        }

                        fun main() {
                            val c = 42
                            val predicate: Closure&lt;Int, Int, Boolean&gt; = parametricPredicate(3)
                            if (predicate.code(predicate.capture, 81)) println("Ok") else println("Ko")
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>représentation de la fonction</li>
                    <li>valeur variables libres</li>
                    <li>c'est une valeur fonctionnelle</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="kotlin" style="max-height: 800px" data-noescape>

                        data class Closure&lt;C, I, O&gt;(val capture: C, val code: (C, I) -> O)

            </code><div class="lang">Kotlin</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="kotlin" style="max-height: 800px" data-noescape>

                        fun parametricPredicate(x: Int): Closure&lt;Int, Int, Boolean&gt; {
                            val c = longComputation(x)
                            return Closure(c, ::parametricPredicateLambda)
                        }

                        fun main() {
                            val c = 42
                            val predicate: Closure&lt;Int, Int, Boolean&gt; = parametricPredicate(3)
                            if (<span class="ch">predicate.code(predicate.capture, 81)</span>) println("Ok") else println("Ko")
                        }

            </code><div class="lang">Kotlin</div></pre>
            <aside class="notes">
                <ul>
                    <li>ajustement de l'appel</li>
                    <li>code fonction lambda liftée</li>
                    <li>valeur capturée et celle qu'on veut tester</li>
                </ul>
            </aside>
        </section>

        <section>
            <h1>Java 8</h1>
            <h2>2014</h2>
            <aside class="notes">
                <ul>
                    <li>acceptation des lambdas</li>
                    <li>sensibilité à la programmation fonctionnelle</li>
                </ul>
            </aside>
        </section>

        <section>
            <a href="./references/jsr335-final/index.html"><img style="border: thin solid" src="./images/JSR335.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li>Clojure 2007 -> JSR 335 (java 8) 2014</li>
                    <li>gestation de 7 ans</li>
                </ul>
            </aside>
        </section>

        <section>
            <a href="http://gafter.blogspot.com/2007/01/definition-of-closures.html"><img style="border: thin solid black" src="./images/Gafter.png" alt=""></a>
            <aside class="notes">
                <ul>
                    <li>Pourquoi tant de temps ?</li>
                    <li>plus d'entités liés lexicalement</li>
                    <li>à minima « this »</li>
                    <li>article de Neil Gafter</li>
                    <li>rétro compatibilité</li>
                    <li>évolutivité</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static int longComputation(int x) {
                                    return x * x;
                                }

                                public static IntPredicate parametricPredicate(int x) {
                                    var c = longComputation(x);
                                    return y -> y % c == 0;
                                }

                                void main() {
                                    var aStream = IntStream.rangeClosed(0, 100);
                                    var predicate = parametricPredicate(3);
                                    IntStream filteredStream = aStream.filter(predicate);

                                    System.out.println(
                                            filteredStream.
                                                    mapToObj(Integer::toString).
                                                    collect(Collectors.joining(",", "[", "]")));
                                }

                                // [0,9,18,27,36,45,54,63,72,81,90,99]

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>Exemple en Java</li>
                    <li>21 plutôt que 8 -> Kotlin</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static int longComputation(int x) {
                                    return x * x;
                                }

                                public static IntPredicate parametricPredicate(int x) {
                                    var c = longComputation(x);
                                    return <span class="ch">y -> y % c == 0</span>;
                                }

                                void main() {
                                    var aStream = IntStream.rangeClosed(0, 100);
                                    var predicate = parametricPredicate(3);
                                    IntStream filteredStream = aStream.filter(predicate);

                                    System.out.println(
                                            filteredStream.
                                                    mapToObj(Integer::toString).
                                                    collect(Collectors.joining(",", "[", "]")));
                                }

                                // [0,9,18,27,36,45,54,63,72,81,90,99]

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>syntaxe pour les lambda</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static int longComputation(int x) {
                                    return x * x;
                                }

                                public static <span class="ch">IntPredicate</span> parametricPredicate(int x) {
                                    var c = longComputation(x);
                                    return y -> y % c == 0;
                                }

                                void main() {
                                    var aStream = IntStream.rangeClosed(0, 100);
                                    var predicate = parametricPredicate(3);
                                    IntStream filteredStream = aStream.filter(predicate);

                                    System.out.println(
                                            filteredStream.
                                                    mapToObj(Integer::toString).
                                                    collect(Collectors.joining(",", "[", "]")));
                                }

                                // [0,9,18,27,36,45,54,63,72,81,90,99]

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>pas de syntaxe pour décrire un type fonctionnel</li>
                    <li>type nominatif, interface</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                @FunctionalInterface
                                public interface IntPredicate {

                                    boolean test(int value);

                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>« Single Abstract Method » ou « SAM » interface</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                <span class="ch">@FunctionalInterface</span>
                                public interface IntPredicate {

                                    boolean test(int value);

                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>annotation « @FunctionalInterface »</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                @FunctionalInterface
                                public interface IntPredicate {

                                    <span class="ch">boolean test(int value)</span>;

                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>closure ressemble à un objet avec une seule méthode</li>
                    <li>accès aux champs</li>
                    <li>rétrocompatibilité</li>
                    <li>Runnable</li>
                    <li>« SAM conversion » en Kotlin</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static boolean parametricPredicateLambda(int c, int y) { return y % c == 0; }

                                public static class Closure implements IntPredicate {

                                    private final int c;

                                    public Closure(int c) {
                                        this.c = c;
                                    }

                                    @Override
                                    public boolean test(int value) {
                                        return parametricPredicateLambda(c, value);
                                    }
                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>stratégie de compilation</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static boolean <span class="ch">parametricPredicateLambda</span>(int c, int y) { return y % c == 0; }

                                public static class Closure implements IntPredicate {

                                    private final int c;

                                    public Closure(int c) {
                                        this.c = c;
                                    }

                                    @Override
                                    public boolean test(int value) {
                                        return parametricPredicateLambda(c, value);
                                    }
                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>fonction lambda-liftée</li>
                    <li>« desugared » dans la terminologie de Java</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static boolean parametricPredicateLambda(int c, int y) { return y % c == 0; }

                                public static class <span class="ch">Closure</span> implements <span class="ch">IntPredicate</span> {

                                    private final int c;

                                    public Closure(int c) {
                                        this.c = c;
                                    }

                                    @Override
                                    public boolean test(int value) {
                                        return parametricPredicateLambda(c, value);
                                    }
                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>classe créée localement</li>
                    <li>interface fonctionnelle cible</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static boolean parametricPredicateLambda(int c, int y) { return y % c == 0; }

                                public static class Closure implements IntPredicate {

                                    private final int <span class="ch">c</span>;

                                    public <span class="ch">Closure(int c)</span> {
                                        this.c = c;
                                    }

                                    @Override
                                    public boolean test(int value) {
                                        return parametricPredicateLambda(c, value);
                                    }
                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>champ pour valeur variable capturée </li>
                    <li>constructeur</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                public static boolean parametricPredicateLambda(int c, int y) { return y % c == 0; }

                                public static class Closure implements IntPredicate {

                                    private final int c;

                                    public Closure(int c) {
                                        this.c = c;
                                    }

                                    @Override
                                    public boolean <span class="ch">test</span>(int value) {
                                        return parametricPredicateLambda(c, value);
                                    }
                                }

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>mise œuvre de la « Single Abstract Method »</li>
                    <li>fonction anonyme lambda liftée</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="java" style="max-height: 800px" data-noescape>

                                public static int longComputation(int x) {
                                    return x * x;
                                }

                                public static IntPredicate parametricPredicate(int x) {
                                    var c = longComputation(x);
                                    return new <span class="ch">Closure(c)</span>;
                                }

            </code><div class="lang">Java</div></pre>
            <pre class="fragment" style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                var predicate = parametricPredicate(3);

                                predicate(81);



            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>créer et retourner la closure</li>
                    <li>pas de syntaxe spécifique ou simplifiée pour l'invocation</li>
                    <li>incorrect</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em"><code class="java" style="max-height: 800px" data-noescape>

                                public static int longComputation(int x) {
                                    return x * x;
                                }

                                public static IntPredicate parametricPredicate(int x) {
                                    var c = longComputation(x);
                                    return new <span class="ch">Closure(c)</span>;
                                }

            </code><div class="lang">Java</div></pre>
            <pre style="font-size: 1.1ex; margin-top: 1ex; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                                var predicate = parametricPredicate(3);

                                <del>predicate(81);</del>

                                predicate.test(81);

            </code><div class="lang">Java</div></pre>
            <aside class="notes">
                <ul>
                    <li>invocation méthode de l'interface SAM</li>
                    <li>subtilité...</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="Java" style="max-height: 800px" data-noescape>

                  private static boolean lambda$parametricPredicate$0(int, int);
                    descriptor: (II)Z
                    flags: (0x100a) ACC_PRIVATE, ACC_STATIC, ACC_SYNTHETIC
                    Code:
                      stack=2, locals=2, args_size=2
                         0: iload_1
                         1: iload_0
                         2: irem
                         3: ifne          10
                         6: iconst_1
                         7: goto          11
                        10: iconst_0
                        11: ireturn
                      LineNumberTable:
                        line 15: 0
                      StackMapTable: number_of_entries = 2
                        frame_type = 10 /* same */
                        frame_type = 64 /* same_locals_1_stack_item */
                          stack = [ int ]

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>descendre dans la soute</li>
                    <li>bytecode généré par le compilateur</li>
                    <li>javap</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="Java" style="max-height: 800px" data-noescape>

                  private static boolean <span class="ch">lambda$parametricPredicate$0</span>(int, int);
                    descriptor: (II)Z
                    flags: (0x100a) ACC_PRIVATE, ACC_STATIC, ACC_SYNTHETIC
                    Code:
                      stack=2, locals=2, args_size=2
                         0: iload_1
                         1: iload_0
                         2: irem
                         3: ifne          10
                         6: iconst_1
                         7: goto          11
                        10: iconst_0
                        11: ireturn
                      LineNumberTable:
                        line 15: 0
                      StackMapTable: number_of_entries = 2
                        frame_type = 10 /* same */
                        frame_type = 64 /* same_locals_1_stack_item */
                          stack = [ int ]

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>fonction anonyme lambda-liftée</li>
                    <li> « lambda$parametricPredicate$0 »</li>
                    <li>name mangling</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="Java" style="max-height: 800px" data-noescape>

                  public static java.util.function.IntPredicate parametricPredicate(int);
                    descriptor: (I)Ljava/util/function/IntPredicate;
                    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
                    Code:
                      stack=1, locals=2, args_size=1
                         0: iload_0
                         1: invokestatic  #7        // Method longComputation:(I)I
                         4: istore_1
                         5: iload_1
                         6: invokedynamic #13,  0   // InvokeDynamic #0:test:(I)Ljava/util/function/IntPredicate;
                        11: areturn
                      LineNumberTable:
                        line 14: 0
                        line 15: 5

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>« parametricPredicate »</li>
                    <li>retourne type « IntPredicate »</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                  public static java.util.function.IntPredicate parametricPredicate(int);
                    descriptor: (I)Ljava/util/function/IntPredicate;
                    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
                    Code:
                      stack=1, locals=2, args_size=1
                         0: iload_0
                         1: invokestatic  #7        // Method longComputation:(I)I
                         4: istore_1
                         5: iload_1
                         6: <span class="ch">invokedynamic</span> #13,  0   // InvokeDynamic #0:test:(I)Ljava/util/function/IntPredicate;
                        11: areturn
                      LineNumberTable:
                        line 14: 0
                        line 15: 5

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>concepteurs JSR 335</li>
                    <li>profiter « InvokeDynamic » Java 7</li>
                    <li>résister changement futurs de mise en œuvre</li>
                    <li>génération instance de « IntPredicate » à la volée</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                  public static java.util.function.IntPredicate parametricPredicate(int);
                    descriptor: (I)Ljava/util/function/IntPredicate;
                    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
                    Code:
                      stack=1, locals=2, args_size=1
                         0: iload_0
                         1: invokestatic  #7        // Method longComputation:(I)I
                         4: istore_1
                         5: iload_1
                         6: <span class="ch">invokedynamic</span> #13,  0   <span class="ch">// InvokeDynamic #0:test:(I)Ljava/util/function/IntPredicate;</span>
                        11: areturn
                      LineNumberTable:
                        line 14: 0
                        line 15: 5

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>référence une méthode d'amorçage (index 0)</li>
                    <li>la méthode de création pas connue avant l'exécution</li>
                    <li>construction de l'invocation de cette création</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                BootstrapMethods:
                  0: #94 REF_invokeStatic java/lang/invoke/LambdaMetafactory.metafactory:(
                                Ljava/lang/invoke/MethodHandles$Lookup;
                                Ljava/lang/String;Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodHandle;
                                Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;
                    Method arguments:
                      #79 (I)Z
                      #81 REF_invokeStatic Main.lambda$parametricPredicate$0:(II)Z
                      #79 (I)Z

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>table des méthodes d'amorçage</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                BootstrapMethods:
                  0: #94 REF_invokeStatic java/lang/invoke/<span class="ch">LambdaMetafactory</span>.metafactory:(
                                Ljava/lang/invoke/MethodHandles$Lookup;
                                Ljava/lang/String;Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodHandle;
                                Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;
                    Method arguments:
                      #79 (I)Z
                      #81 REF_invokeStatic Main.lambda$parametricPredicate$0:(II)Z
                      #79 (I)Z

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>« metafactory » de la classe « LambdaMetafactory »</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="java" style="max-height: 800px" data-noescape>

                BootstrapMethods:
                  0: #94 REF_invokeStatic java/lang/invoke/LambdaMetafactory.metafactory:(
                                Ljava/lang/invoke/MethodHandles$Lookup;
                                Ljava/lang/String;Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodType;
                                Ljava/lang/invoke/MethodHandle;
                                Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;
                    Method arguments:
                      #79 (I)Z
                      #81 REF_invokeStatic <span class="ch">Main.lambda$parametricPredicate$0:(II)Z</span>
                      #79 (I)Z

            </code><div class="lang">Bytecode</div></pre>
            <aside class="notes">
                <ul>
                    <li>argument fonction lambda-liftée « lambda$parametricPredicate$0 »</li>
                    <li>création classe similaire à « Closure »</li>
                    <li>appel du constructeur pour l'instancier</li>
                    <li>méthode Java tout à fait consultable</li>
                    <li>bibliothèque de manipulation de bytecode « ASM »</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;">
                <object data="./images/Indy/1.svg"></object>
            </div>
            <aside class="notes">
                <ul>
                    <li>« invokedynamic » exécutée dans le flux de bytecode...</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;">
                <object data="./images/Indy/2.svg"></object>
            </div>
            <aside class="notes">
                <ul>
                    <li>... méthode de bootstrap correspondante est invoquée ...</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;">
                <object data="./images/Indy/3.svg"></object>
            </div>
            <aside class="notes">
                <ul>
                    <li>produit une classe à la volée</li>
                    <li>« CallSite », point d'appel, pour le constructeur</li>
                </ul>

            </aside>

        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;">
                <object data="./images/Indy/4.svg"></object>
            </div>
            <aside class="notes">
                <ul>
                    <li>Point d'appel constant</li>
                    <li>Pas langage dynamique</li>
                    <li>Contournement de metafactory</li>
                    <li>JIT pourra optimiser le tout</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="margin-top: 5em; margin-bottom: 100%;">
                <object data="./images/Indy/5.svg"></object>
            </div>
        </section>

        <section>
            <h1>Pour Conclure</h1>
            <aside class="notes">
                <ul>
                    <li>fonctions anonymes liées lexicalement populaires</li>
                    <li>sans récupération automatique de la mémoire</li>
                    <li>C++ ou Rust</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="rust" style="max-height: 800px" data-noescape>

                        fn long_computation(x: i64) -> i64 { x * x }

                        fn parametric_predicate(x: i64) -> impl FnMut(&i64) -> bool {
                            let c = long_computation(x);
                            move |y| { y % c == 0 }
                        }

                        fn main() {
                            let a_range = 1 .. 100;
                            let predicate = parametric_predicate(3);
                            let filtered_range = a_range.filter(predicate);
                            println!("{:?}", filtered_range.collect::&lt;Vec&lt;i64&gt;&gt;())
                        }

                        // [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99]

            </code><div class="lang">Rust</div></pre>
            <aside class="notes">
                <ul>
                    <li>Graydon Hoare</li>
                    <li>« language engineer », est un amateur de d'OCaml</li>
                    <li>premiers compilos en OCaml</li>
                    <li>pas dépaysés</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="rust" style="max-height: 800px" data-noescape>

                        fn long_computation(x: i64) -> i64 { x * x }

                        fn parametric_predicate(x: i64) -> <span class="ch">impl FnMut(&i64) -> bool</span> {
                            let c = long_computation(x);
                            move <span class="ch">|y| { y % c == 0 }</span>
                        }

                        fn main() {
                            let a_range = 1 .. 100;
                            let predicate = parametric_predicate(3);
                            let filtered_range = a_range.filter(predicate);
                            println!("{:?}", filtered_range.collect::&lt;Vec&lt;i64&gt;&gt;())
                        }

                        // [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99]

            </code><div class="lang">Rust</div></pre>
            <aside class="notes">
                <ul>
                    <li>déclaration d'un type fonctionnel</li>
                    <li>écriture d'une lambda</li>
                </ul>
            </aside>
        </section>

        <section>
            <pre style="font-size: 1.1ex; margin-top: 5em; margin-bottom: 100%"><code class="rust" style="max-height: 800px" data-noescape>

                        fn long_computation(x: i64) -> i64 { x * x }

                        fn parametric_predicate(x: i64) -> impl FnMut(&i64) -> bool {
                            let c = long_computation(x);
                            <span class="ch">move</span> |y| { y % <span class="ch">c</span> == 0 }
                        }

                        fn main() {
                            let a_range = 1 .. 100;
                            let predicate = parametric_predicate(3);
                            let filtered_range = a_range.filter(predicate);
                            println!("{:?}", filtered_range.collect::&lt;Vec&lt;i64&gt;&gt;())
                        }

                        // [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99]

            </code><div class="lang">Rust</div></pre>
            <aside class="notes">
                <ul>
                    <li>impératifs liés au modèle de gestion mémoire</li>
                    <li>« move » pour gérer la capture de la variable</li>
                    <li>lambda, une fonction anonyme</li>
                    <li> dynamiquement ou lexicalement liée</li>
                    <li>gestion de la capture de son environnement</li>
                    <li>valeurs fonctionnelles que l'on appelle closure</li>
                    <li>stratégies de mises en œuvre nombreuses</li>
                    <li>spécificités du langage</li>
                </ul>
            </aside>
        </section>

        <section>
            <div style="display: flex; justify-content: space-between">
                <div style="margin-left: 2em; display: flex; flex-direction: column">
                    <div style="margin-top: 1em; font-size: 1.55em; text-align: left" class="green">Frédéric Cabestre</div>
                </div>
            </div>
            <h1 style="margin-top: 1em">Merci</h1>
            <div style="display: grid; grid: 'one two three four' / 1fr 1fr 1fr 1fr; margin-bottom: 100%; margin-top: 2em">
                <div style="justify-self: center; grid-area: one">
                    <div>Feedback</div>
                    <img src="./images/feedback.png" alt="">
                </div>
                <div style="justify-self: center; grid-area: four">
                    <div>Présentation</div>
                    <img src="./images/presentation.png" alt="">
                </div>
            </div>
        </section>
    </div>
</div>

<script src="./dist/reveal.js"></script>
<script src="./plugin/notes/notes.js"></script>
<script src="./plugin/markdown/markdown.js"></script>
<script src="./plugin/highlight-old/highlight.js"></script>
<script src="./plugin/math/math.js"></script>

<script>
    Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        center: true,
        width: 1600,
        height: 900,

        transition: "none",

        plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX],

        katex: {
            local: " ",
            trust: true
        },
    });
</script>
</body>
</html>
